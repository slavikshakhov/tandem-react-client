(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(28),r=a.n(l),o=(a(64),a(7)),s=a(6),i=(a(65),a(2)),u=a(1),m={url:{API_URL:"https://languages-tandem.herokuapp.com"}},d=a(3),v=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],r=Object(n.useState)(!1),o=Object(i.a)(r,2),s=o[0],u=o[1],m=Object(d.a)({},e);for(var v in m)m[v]=!1;var g=Object(n.useState)(m),p=Object(i.a)(g,2),f=p[0],b=p[1];return{touched:s,errors:f,value:c,setValue:l,reset:function(){l(""),u(!1)},bind:{value:c,onChange:function(t){l(t.target.value),Object.keys(e).length>0&&function(t){var a={};if(Object.keys(e).includes("required")&&(a.required=0===t.target.value.length),Object.keys(e).includes("minLength")&&(a.minLength=t.target.value.length<e.minLength),Object.keys(e).includes("maxLength")&&(a.maxLength=t.target.value.length>e.maxLength),Object.keys(e).includes("pattern")){var n=new RegExp(e.pattern);console.log(n.test(t.target.value)),a.pattern=!n.test(t.target.value)}b(a)}(t)},onBlur:function(t){u(!0),Object.keys(e).length>0&&function(t){var a={};Object.keys(e).includes("required")&&(a.required=0===t.target.value.length),Object.keys(e).includes("minLength")&&(a.minLength=t.target.value.length<e.minLength),Object.keys(e).includes("maxLength")&&(a.maxLength=t.target.value.length>e.maxLength),b(a)}(t)}}}};a(70);function g(){var e=Object(s.g)(),t=Object(u.c)((function(e){return e.userStatus.regMode})),a=Object(u.c)((function(e){return e.userStatus.loggedIn})),l=(Object(u.c)((function(e){return e.userStatus.currentUser})),Object(n.useState)("")),r=Object(i.a)(l,2),d=r[0],g=(r[1],Object(u.c)((function(e){return e.chatReducer.socket})));console.log();var p=Object(u.b)(),f=m.url.API_URL,b=v({required:!1}),E=b.value,h=b.bind,N=b.reset,O=b.touched,y=b.errors,j=v({required:!1,minLength:3,maxLength:10}),S=j.value,k=j.bind,T=j.reset,L=j.touched,w=j.errors,q=null===y||void 0===y?void 0:y.required,_=(null===w||void 0===w?void 0:w.required)&&(null===w||void 0===w?void 0:w.minLength)&&!(null===w||void 0===w?void 0:w.maxLength),x=L&&(null===w||void 0===w?void 0:w.minLength)&&!(null===w||void 0===w?void 0:w.required),R=null===w||void 0===w?void 0:w.maxLength,C=O&&(null===y||void 0===y?void 0:y.required),U=L&&((null===w||void 0===w?void 0:w.required)||(null===w||void 0===w?void 0:w.minLength)||(null===w||void 0===w?void 0:w.maxLength)),D=L&&!(null===w||void 0===w?void 0:w.required),J=function(){return!!(!O&&!L||Object.values(w).filter((function(e){return!0===e})).length>0||(null===y||void 0===y?void 0:y.required))},P=function(t){t.preventDefault();var a={name:E,password:S};console.log(JSON.stringify(a));var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};fetch("".concat(f,"/auth/login"),n).then((function(e){return e.json()})).then((function(t){console.log(t),void 0!==t.token&&(N(),T(),localStorage.setItem("token",t.token),p({type:"LOGGEDIN",payload:t.token}),p({type:"CURRENT_USER",payload:JSON.stringify(t.user)}),e.push("home"))}))};return c.a.createElement("nav",{className:"navbar ".concat(t?"hide-navigation":"")},c.a.createElement("div",{className:"pic"},c.a.createElement("img",{src:d})),c.a.createElement("div",{className:"burger-container"},c.a.createElement("input",{type:"checkbox",id:"burger-check",className:"burger-check"}),c.a.createElement("label",{className:"burger ".concat(t?"remove-burger":""),htmlFor:"burger-check"},c.a.createElement("div",{className:"burger-line"}),c.a.createElement("div",{className:"burger-line"}),c.a.createElement("div",{className:"burger-line"})),c.a.createElement("div",{className:"side-menu ".concat(t?"remove-side-menu":""),id:"sideMenu"},c.a.createElement("a",{href:"",className:"close-side-menu"},"\xd7"),c.a.createElement("a",{href:"# ",className:"side-menu-item main-link"},"LanguageTandem"),c.a.createElement("a",{href:"# ",className:"side-menu-item hover-item"},"about"),c.a.createElement("a",{href:"# ",className:"side-menu-item hover-item"},"contact"),a?null:c.a.createElement("form",{onSubmit:P,className:"form-container"},c.a.createElement("p",{className:"heading"},"Login"),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",Object.assign({type:"text",name:"name",className:"input",autoComplete:"off"},h)),q?c.a.createElement("div",{className:"feedback invalid-feedback"},"Name is required"):null,c.a.createElement("label",{htmlFor:"name",className:"label ".concat(C?"is-invalid":O?"is-valid":"")},(null===y||void 0===y?void 0:y.required)?"Name!!!":"Name")),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",Object.assign({type:"password",name:"password",className:"input",autoComplete:"off"},k)),_?c.a.createElement("div",{className:"feedback invalid-feedback"},"Password is required"):null,x?c.a.createElement("div",{className:"feedback invalid-feedback"},"Password too short"):null,R?c.a.createElement("div",{className:"feedback invalid-feedback"},"Password too long"):null,c.a.createElement("label",{htmlFor:"password",className:"label ".concat(U?"is-invalid":""," ").concat(D?"is-valid":"")},(null===w||void 0===w?void 0:w.required)||L&&((null===w||void 0===w?void 0:w.minLength)||(null===w||void 0===w?void 0:w.maxLength))?"Password!!!":"Password")),c.a.createElement("div",{className:"line"}),c.a.createElement("button",{type:"submit",className:"btn-raise btn-design ".concat(J()?"btn-disabled":"")},"Login"),c.a.createElement("div",{className:"side-menu-register-btn-container"},c.a.createElement("span",{className:"side-menu-text"},"Not a member yet?"),c.a.createElement(o.b,{to:"/register"},c.a.createElement("button",{className:"btn-link side-menu-btn-link",onClick:function(){return p({type:"SET_REGISTER_MODE",payload:!0})}},"Register")))))),c.a.createElement("div",{className:"top-menu"},c.a.createElement("a",{href:"# ",className:"top-menu-item main-link"},"LanguageTandem"),c.a.createElement("div",{className:"links"},!a&&c.a.createElement("a",{href:"# ",className:"top-menu-item"},"about"),a&&c.a.createElement(o.b,{to:"/languages",className:"top-menu-item"},"My Languages"),a&&c.a.createElement(o.b,{to:"/matchedusers",className:"top-menu-item"},"Learners"),a&&c.a.createElement(o.b,{to:"/chat",className:"top-menu-item"},"Messages"),a&&c.a.createElement("a",{href:"# ",className:"top-menu-item"},"contact")),c.a.createElement("div",{className:"admin-box"},t||a?a&&c.a.createElement(o.b,{to:"/start"},c.a.createElement("button",{className:"btn-design btn-raise logout-md",onClick:function(){return localStorage.removeItem("token"),p({type:"LOGGEDIN",payload:null}),void(g&&g.disconnect())}},"Logout")):c.a.createElement("div",{className:"login-register"},c.a.createElement("div",{className:"login-link"},c.a.createElement(o.b,{to:"/login"},c.a.createElement("button",{className:"btn-link register-btn-design"},"Login"))),c.a.createElement("form",{onSubmit:P,className:"login-form login-form-top"},c.a.createElement("input",Object.assign({type:"text",name:"name",placeholder:"Name is required",autoComplete:"off"},h,{className:"inline-input ".concat(O&&(null===y||void 0===y?void 0:y.required)?"invalid-input":"")})),c.a.createElement("input",Object.assign({type:"password",name:"password",placeholder:"Password is required",autoComplete:"off"},k,{className:"inline-input ".concat(L&&(null===w||void 0===w?void 0:w.required)||L&&(null===w||void 0===w?void 0:w.minLength)||L&&(null===w||void 0===w?void 0:w.maxLength)?"invalid-input":"")})),c.a.createElement("button",{type:"submit",className:"btn-raise btn-design ".concat(J()?"btn-disabled":"")},"Login")),c.a.createElement(o.b,{to:"/register"},c.a.createElement("button",{className:"btn-link register-btn-design",onClick:function(){return p({type:"SET_REGISTER_MODE",payload:!0})}},"Register"))))))}a(72);var p=function(e){var t=m.url.API_URL,a=Object(u.b)(),l=Object(u.c)((function(e){return e.userStatus.regMode})),r=Object(n.useState)(!1),d=Object(i.a)(r,2),g=d[0],p=d[1],f=(Object(s.g)(),v({required:!1})),b=f.value,E=f.bind,h=f.reset,N=f.touched,O=f.errors,y=v({required:!1}),j=y.value,S=y.bind,k=y.reset,T=y.touched,L=y.errors,w=v({required:!1,minLength:4,maxLength:8,pattern:"(?=.*[0-9])(?=.*[A-Z])"}),q=w.value,_=w.bind,x=w.reset,R=w.touched,C=w.errors,U=v({required:!1}),D=U.value,J=U.bind,P=U.reset,I=U.touched,F=U.errors,M=v({required:!1}),G=M.value,A=M.bind,W=M.reset,V=M.touched,X=M.errors;console.log("name errors: ".concat(JSON.stringify(O),", password errors: ").concat(JSON.stringify(C),", name touched: ").concat(N,", password touched: ").concat(R));var B=null===O||void 0===O?void 0:O.required,H=null===O||void 0===O?void 0:O.required,Y=(null===C||void 0===C?void 0:C.required)&&(null===C||void 0===C?void 0:C.minLength)&&!(null===C||void 0===C?void 0:C.maxLength)&&!(null===C||void 0===C?void 0:C.pattern),z=R&&(null===C||void 0===C?void 0:C.minLength)&&!(null===C||void 0===C?void 0:C.required),K=null===C||void 0===C?void 0:C.maxLength,Z=N&&(null===O||void 0===O?void 0:O.required),$=T&&(null===L||void 0===L?void 0:L.required),Q=R&&((null===C||void 0===C?void 0:C.required)||(null===C||void 0===C?void 0:C.minLength)||(null===C||void 0===C?void 0:C.maxLength)),ee=R&&!(null===C||void 0===C?void 0:C.required),te=I&&(null===F||void 0===F?void 0:F.required),ae=V&&(null===X||void 0===X?void 0:X.required);return console.log(0===Object.values(C).filter((function(e){return!0===e})).length),console.log("one of fields untouched: ".concat(!(!N||!R||!I||!V))),console.log(N,R,I,V),c.a.createElement("div",{className:"register-page"},l&&!g?c.a.createElement("div",{className:"register-page-container"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={name:b,email:j,password:q,city:D,country:G};console.log(JSON.stringify(n));var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch("".concat(t,"/auth/register"),c).then((function(e){return e.json()})).then((function(e){console.log(e),h(),k(),x(),P(),W(),a({type:"SET_REGISTER_MODE",payload:!1}),p(!0)}))},className:"register-form-container",autoComplete:"off"},c.a.createElement("p",{className:"heading"},"Register"),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",Object.assign({type:"text",name:"name",className:"input",autoComplete:"off"},E)),B?c.a.createElement("div",{className:"feedback invalid-feedback"},"Name is required"):null,c.a.createElement("label",{htmlFor:"name",className:"label ".concat(Z?"is-invalid":N?"is-valid":"")},(null===O||void 0===O?void 0:O.required)?"Name!!!":"Name")),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",Object.assign({type:"email",name:"email",className:"input",autoComplete:"off"},S)),H?c.a.createElement("div",{className:"feedback invalid-feedback"},"Email is required"):null,c.a.createElement("label",{htmlFor:"name",className:"label ".concat($?"is-invalid":T?"is-valid":"")},(null===L||void 0===L?void 0:L.required)?"Email!!!":"Email")),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",Object.assign({name:"password",type:"password",className:"input",autoComplete:"off"},_)),Y?c.a.createElement("div",{class:"feedback invalid-feedback"},"Password is required"):null,z?c.a.createElement("div",{class:"feedback invalid-feedback"},"Password too short"):null,K?c.a.createElement("div",{class:"feedback invalid-feedback"},"Password too long"):null,(null===C||void 0===C?void 0:C.pattern)?c.a.createElement("div",{class:"feedback invalid-feedback"},"at least one capital letter / digit!"):null,c.a.createElement("label",{htmlFor:"password",className:"label ".concat(Q?"is-invalid":""," ").concat(ee?"is-valid":"")},(null===C||void 0===C?void 0:C.required)||R&&((null===C||void 0===C?void 0:C.minLength)||(null===C||void 0===C?void 0:C.maxLength))?"Password!!!":"Password")),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",Object.assign({type:"text",name:"city",className:"input",autoComplete:"off"},J)),(null===F||void 0===F?void 0:F.required)?c.a.createElement("div",{className:"feedback invalid-feedback"},"City is required"):null,c.a.createElement("label",{htmlFor:"city",className:"label ".concat(te?"is-invalid":I?"is-valid":"")},(null===F||void 0===F?void 0:F.required)?"City!!!":"City")),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",Object.assign({type:"text",name:"country",className:"input",autoComplete:"off"},A)),(null===X||void 0===X?void 0:X.required)?c.a.createElement("div",{className:"feedback invalid-feedback"},"Country is required"):null,c.a.createElement("label",{htmlFor:"name",className:"label ".concat(ae?"is-invalid":V?"is-valid":"")},(null===X||void 0===X?void 0:X.required)?"Country!!!":"Country")),c.a.createElement("div",{className:"register-btns"},c.a.createElement("button",{type:"submit",className:"btn-raise btn-design btn-register ".concat((N&&T&&R&&I&&V||Object.values(C).filter((function(e){return!0===e})).length>0||(null===O||void 0===O?void 0:O.required)||(null===L||void 0===L?void 0:L.required)||(null===F||void 0===F?void 0:F.required)||null===X||void 0===X||X.required,""))},"Register"),c.a.createElement(o.b,{to:"/"},c.a.createElement("button",{className:"btn-link cancel-register-btn",onClick:function(){return a({type:"SET_REGISTER_MODE",payload:!1})}},"Cancel"))))):g&&c.a.createElement("div",{className:"registered-message-container"},c.a.createElement("div",{className:"registered-message"},"Registered Successfully! Please log in with your new credentials!")))},f=function(){return c.a.createElement("div",null,c.a.createElement("p",null,"from UsersToMeet"))},b=a(40),E=a.n(b),h=(a(98),a(99),function(e){var t,a,n=e.user,l=e.userFromSocket,r=Object(u.b)(),o=Object(s.g)();console.log(n);return c.a.createElement("div",{className:"user-container"},c.a.createElement("div",{className:"user-content"},c.a.createElement("div",{className:"user-card-header"},c.a.createElement("p",null,n.name[0].toUpperCase()+n.name.slice(1,n.name.length)),c.a.createElement("button",{className:"start-chat ".concat(!l&&"start-chat-inactive"),disabled:!l,onClick:function(){return r({type:"SET_CHATTER",payload:l}),void o.push("chat")}},l?" online":" offline")),c.a.createElement("div",{className:"divider"}),c.a.createElement("div",{className:"horizontal-center"},c.a.createElement("b",null,n.city,", ",n.country)),c.a.createElement("div",{className:"languages-container"},c.a.createElement("div",{className:"lgs"},c.a.createElement("h4",{className:"lgs-header"},"Speaks:"),null===(t=n.offeredLgs)||void 0===t?void 0:t.map((function(e){return c.a.createElement("p",null,e)}))),c.a.createElement("div",{className:"lgs"},c.a.createElement("h4",{className:"lgs-header"},"Learning:"),null===(a=n.wantedLgs)||void 0===a?void 0:a.map((function(e){return c.a.createElement("p",null,e)}))))),c.a.createElement("button",{className:"btn-raise contact-btn",onClick:function(){return r({type:"SET_CONTACT",payload:n}),void o.push("/contact")}},"Send Email"))}),N=function(){var e=m.url.API_URL,t=Object(u.c)((function(e){return e.userStatus.filteredUsers})),a=(Object(u.c)((function(e){return e.userStatus.decodedToken})),Object(u.c)((function(e){return e.userStatus.currentUser}))),l=(Object(u.c)((function(e){return e.chatReducer.contactName})),Object(n.useState)([])),r=Object(i.a)(l,2),o=r[0],d=r[1],v=Object(u.c)((function(e){return e.chatReducer.connectedMembers})),g=Object(n.useState)(null),p=Object(i.a)(g,2),f=(p[0],p[1]),b=Object(n.useState)(""),N=Object(i.a)(b,2),O=N[0],y=N[1],j=Object(n.useState)(!1),S=Object(i.a)(j,2),k=S[0],T=S[1],L=Object(u.b)(),w=Object(s.g)();Object(n.useEffect)((function(){console.log(a);var t=E()(e).on("connect",(function(){console.log("connected to server")}));return v&&(d(v),console.log(v)),v||t.emit("connect-user",{userName:JSON.parse(a).name}),t.on("all-users",(function(e){d(e),L({type:"SET_CONNECTED_USERS",payload:e}),d(e),console.log(e)})),console.log(o),t.on("message-received",(function(e){var t=e.text,n=e.chatter,c=e.sender;console.log(t),console.log(n),console.log(a),console.log(c),console.log(v),console.log(o),T(!0),console.log(JSON.parse(a)),c[0]&&(y({from:c[0].userName,to:JSON.parse(a).name,text:t}),L({type:"SET_MESSAGE",payload:{from:c[0].userName,to:JSON.parse(a).name,text:t}})),L({type:"SET_CHATTER",payload:c[0]})})),L({type:"SET_SOCKET",payload:t}),f(t),function(){return T(!1)}}),[]);var q=function(e){console.log(o),console.log(v);var t=o.filter((function(t){if(console.log(t),t.userName===e.name)return t}));return 0===t.length?null:t[0]};return console.log(t),c.a.createElement("div",{className:"main"},t&&0!==t.length?c.a.createElement("div",{className:"users-page-container"},c.a.createElement("div",{className:"users-container"},null===t||void 0===t?void 0:t.map((function(e,t){return c.a.createElement("div",{key:"".concat(t),className:""},c.a.createElement(h,{user:e,userFromSocket:q(e)}))}))),k&&c.a.createElement("button",{className:"message-notification",onClick:function(){return w.push("/chat")}},"You have a message from"," ",c.a.createElement("span",{className:"message-from-name"},O.from))):c.a.createElement("div",{className:"no-users-container"},c.a.createElement("div",{className:"no-users"},"So far no users found that match your languages")))},O=a(8),y=a(5),j=a.n(y),S=a(13),k=a(15),T=a(30);a(101);function L(){var e=Object(u.c)((function(e){return e.userStatus.decodedToken})),t=Object(s.g)(),a=Object(u.c)((function(e){return e.languagesReducer.userOfferedLgs}));console.log(a);var l=Object(u.c)((function(e){return e.languagesReducer.userWantedLgs})),r=Object(u.b)(),o=Object(T.a)(),m=o.register,d=o.handleSubmit,v=(o.errors,o.watch,Object(n.useState)(!0)),g=Object(i.a)(v,2),p=(g[0],g[1]),f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=(b[0],b[1]),h=[{name:"english",country:"gb",selected:!1},{name:"french",country:"fr",selected:!1},{name:"spanish",country:"es",selected:!1},{name:"german",country:"de",selected:!1},{name:"chinese",country:"cn",selected:!1},{name:"russian",country:"ru",selected:!1},{name:"italian",country:"it",selected:!1},{name:"portuguese",country:"pt",selected:!1},{name:"greek",country:"gr",selected:!1},{name:"japanese",country:"jp",selected:!1},{name:"dutch",country:"nl",selected:!1},{name:"turkish",country:"tr",selected:!1}],N=[{name:"english",country:"gb",selected:!1},{name:"french",country:"fr",selected:!1},{name:"spanish",country:"es",selected:!1},{name:"german",country:"de",selected:!1},{name:"chinese",country:"cn",selected:!1},{name:"russian",country:"ru",selected:!1},{name:"italian",country:"it",selected:!1},{name:"portuguese",country:"pt",selected:!1},{name:"greek",country:"gr",selected:!1},{name:"japanese",country:"jp",selected:!1},{name:"dutch",country:"nl",selected:!1},{name:"turkish",country:"tr",selected:!1}],y=Object(n.useState)([]),L=Object(i.a)(y,2),w=L[0],q=L[1],_=Object(n.useState)([]),x=Object(i.a)(_,2),R=x[0],C=x[1];Object(n.useEffect)((function(){q(function(){var e=[];if(console.log(a),(null===a||void 0===a?void 0:a.length)>0){var t,n=Object(k.a)(h);try{for(n.s();!(t=n.n()).done;){var c,l=t.value,r=Object(k.a)(a);try{for(r.s();!(c=r.n()).done;){var o=c.value;l.name===o.name&&(h[h.indexOf(l)].selected=!0,e.push(l.name))}}catch(s){r.e(s)}finally{r.f()}}}catch(s){n.e(s)}finally{n.f()}}e.length>0&&p(!1);return e}())}),[]),Object(n.useEffect)((function(){C(function(){var e=[];if(console.log(l),(null===l||void 0===l?void 0:l.length)>0){var t,a=Object(k.a)(N);try{for(a.s();!(t=a.n()).done;){var n,c=t.value,r=Object(k.a)(l);try{for(r.s();!(n=r.n()).done;){var o=n.value;c.name===o.name&&(N[N.indexOf(c)].selected=!0,e.push(c.name))}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}}e.length>0&&E(!1);return e}())}),[]);var U=function(){var a=Object(S.a)(j.a.mark((function a(){var n,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,offeredLgs:w})},fetch("http://localhost:4000/auth/adduserofferedlgs",n).then((function(e){return e.json()})).then((function(e){e&&(console.log(e),console.log(e.offerelgs),r({type:"SET_USER_OFFEREDLGS",payload:e.offeredlgs}))})),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,wantedLgs:R})},fetch("http://localhost:4000/auth/adduserwantedlgs",c).then((function(e){return e.json()})).then((function(e){e&&r({type:"SET_USER_WANTEDLGS",payload:e.wantedlgs})})),t.push("/home");case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),D=function(){var e=h.sort((function(e,t){return e.name>t.name?1:-1}));return console.log(e),e},J=function(){var e=N.sort((function(e,t){return e.name>t.name?1:-1}));return console.log(e),e},P=function(e){if(console.log(e.target.checked),console.log(e.target.value),e.target.checked)q([].concat(Object(O.a)(w),[e.target.value]));else{var t,a=Object(k.a)(w);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n===e.target.value){var c=Object(O.a)(w);c.splice(c.indexOf(n),1),q(c)}}}catch(l){a.e(l)}finally{a.f()}}},I=function(e){if(console.log(e.target.checked),console.log(e.target.value),e.target.checked)C([].concat(Object(O.a)(R),[e.target.value]));else{var t,a=Object(k.a)(R);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n===e.target.value){var c=Object(O.a)(R);c.splice(c.indexOf(n),1),C(c)}}}catch(l){a.e(l)}finally{a.f()}}};return c.a.createElement("form",{className:"lgs-form",onSubmit:d(U)},c.a.createElement("div",{className:"boxes-container"},c.a.createElement("div",{className:"boxes"},c.a.createElement("div",{className:"box box-1"},c.a.createElement("div",{className:"header centering-container"},c.a.createElement("p",null,"I am a speaker of")),c.a.createElement("div",{className:"lgs-container"},c.a.createElement("ul",{className:"popup-list"},c.a.createElement("div",{className:"popup-col"},D().slice(0,6).map((function(e,t){return c.a.createElement("li",{key:t,className:"popup-item"},c.a.createElement("input",{type:"checkbox",id:e.name,className:"",value:e.name,onChange:P,name:e.name,ref:m(),checked:e.selected||w.includes(e.name)}),c.a.createElement("label",{className:"popup-label",for:e.name},c.a.createElement("span",{className:"flag-icon flag-icon-".concat(e.country)}),e.name))}))),c.a.createElement("div",{class:"popup-col"},D().slice(6,12).map((function(e,t){return c.a.createElement("li",{key:t,className:"popup-item"},c.a.createElement("input",{type:"checkbox",id:e.name,className:"",value:e.name,onChange:P,name:e.name,ref:m(),checked:e.selected||w.includes(e.name)}),c.a.createElement("label",{className:"popup-label",for:e.name},c.a.createElement("span",{className:"flag-icon flag-icon-".concat(e.country)}),e.name))})))))),c.a.createElement("div",{className:"box box-2"},c.a.createElement("div",{className:"header centering-container"},c.a.createElement("p",null,"I want to learn")),c.a.createElement("div",{className:"lgs-container"},c.a.createElement("ul",{className:"popup-list"},c.a.createElement("div",{className:"popup-col"},J().slice(0,6).map((function(e,t){return c.a.createElement("li",{key:t,className:"popup-item"},c.a.createElement("input",{type:"checkbox",id:e.name,className:"",value:e.name,onChange:I,name:e.name,ref:m(),checked:e.selected||R.includes(e.name)}),c.a.createElement("label",{className:"popup-label",for:e.name},c.a.createElement("span",{className:"flag-icon flag-icon-".concat(e.country)}),e.name))}))),c.a.createElement("div",{class:"popup-col"},J().slice(6,12).map((function(e,t){return c.a.createElement("li",{key:t,className:"popup-item"},c.a.createElement("input",{type:"checkbox",id:e.name,className:"",value:e.name,onChange:I,name:e.name,ref:m(),checked:e.selected||R.includes(e.name)}),c.a.createElement("label",{className:"popup-label",for:e.name},c.a.createElement("span",{className:"flag-icon flag-icon-".concat(e.country)}),e.name))}))))))),c.a.createElement("div",{className:"no-warning ".concat(0===w.length||0===R.length&&"warning")},c.a.createElement("p",{className:"horizontal-center"},"At least one languages from each section must be selected!"))),c.a.createElement("div",{className:"languages-btn-container"},c.a.createElement("button",{type:"submit",className:"btn-raise language-btn ".concat(0===w.length||0===R.length&&"language-btn-disabled"),disabled:0===w.length||0===R.length},"Submit")))}a(102);var w=function(){var e=m.url.API_URL,t=Object(u.c)((function(e){return e.userStatus.decodedToken})),a=Object(u.c)((function(e){return e.userStatus.currentUser})),l=Object(n.useState)([]),r=Object(i.a)(l,2),o=r[0],s=r[1],d=Object(n.useState)([]),v=Object(i.a)(d,2),g=v[0],p=v[1],b=Object(n.useState)([]),E=Object(i.a)(b,2),h=E[0],O=E[1],y=Object(n.useState)([]),j=Object(i.a)(y,2),S=j[0],k=(j[1],Object(n.useState)(null)),T=Object(i.a)(k,2),w=(T[0],T[1],Object(u.b)());Object(n.useEffect)((function(){console.log(a),q(),_()}),[]),Object(n.useEffect)((function(){console.log(g),console.log(o),(null===g||void 0===g?void 0:g.length)>0&&(null===o||void 0===o?void 0:o.length)>0&&x(g,o)}),[g,o]);var q=function(){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})};fetch("".concat(e,"/auth/thisUserOfferedLgs"),a).then((function(e){return e.json()})).then((function(e){var t=0===(null===e||void 0===e?void 0:e.offeredlgs.length);console.log(null===e||void 0===e?void 0:e.offeredlgs),w({type:"SET_USER_OFFEREDLGS",payload:e.offeredlgs}),w({type:"SET_OFFERED_LGS_MODE",payload:t}),s(e.offeredlgs)}))},_=function(){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})};fetch("".concat(e,"/auth/thisUserWantedLgs"),a).then((function(e){return e.json()})).then((function(e){var t=0===(null===e||void 0===e?void 0:e.wantedlgs.length);w({type:"SET_USER_WANTEDLGS",payload:e.wantedlgs}),w({type:"SET_WANTED_LGS_MODE",payload:t}),p(e.wantedlgs)}))},x=function(t,n){console.log("submit");var c=n.map((function(e){return e.name})),l=t.map((function(e){return e.name}));console.log(l),console.log(c);var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({offeredLgs:c,wantedLgs:l})};fetch("".concat(e,"/auth/filterUsers"),r).then((function(e){return e.json()})).then((function(e){console.log(e.filteredUsers);var t=e.filteredUsers.filter((function(e){return console.log(e.name,a,JSON.parse(a).name),e.name!==JSON.parse(a).name}));console.log(t),w({type:"FILTERED_USERS",payload:t}),O(t)}))};return c.a.createElement("div",{className:"container-section"},S.length>0?c.a.createElement(f,null):h.length>0?c.a.createElement(N,null):0===o.length||0===g.length?c.a.createElement(L,null):c.a.createElement("div",{className:"no-users-container"},c.a.createElement("div",{className:"no-users"},"So far no users found that match your languages")))},q=a(58),_=function(e){var t=e.component,a=e.path,n=Object(q.a)(e,["component","path"]),l=Object(u.c)((function(e){return e.userStatus.decodedToken}));return console.log(l),c.a.createElement(s.b,Object.assign({},n,{path:a,render:function(e){return l?c.a.createElement(t,e):c.a.createElement(s.a,{to:"/register"})}}))};a(103);var x=function(e){var t=m.url.API_URL,a=Object(u.b)(),n=Object(s.g)(),l=v({required:!1}),r=l.value,i=l.bind,d=l.reset,g=l.touched,p=l.errors,f=v({required:!1}),b=f.value,E=f.bind,h=f.reset,N=f.touched,O=f.errors;console.log("name errors: ".concat(JSON.stringify(p),", password errors: ").concat(JSON.stringify(O),", name touched: ").concat(g,", password touched: ").concat(N));var y=null===p||void 0===p?void 0:p.required,j=null===O||void 0===O?void 0:O.required,S=g&&(null===p||void 0===p?void 0:p.required),k=N&&(null===O||void 0===O?void 0:O.required),T=N&&!(null===O||void 0===O?void 0:O.required);return console.log(0===Object.values(O).filter((function(e){return!0===e})).length),c.a.createElement("div",{className:"register-page"},c.a.createElement("div",{className:"register-page-container"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var c={name:r,password:b};console.log(JSON.stringify(c));var l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)};fetch("".concat(t,"/auth/login"),l).then((function(e){return e.json()})).then((function(e){console.log(e),void 0!==e.token&&(d(),h(),localStorage.setItem("token",e.token),a({type:"LOGGEDIN",payload:e.token}),n.push("home")),a({type:"CURRENT_USER",payload:JSON.stringify(e.user)})}))},className:"register-form-container",autoComplete:"off"},c.a.createElement("p",{className:"heading"},"Register"),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",Object.assign({type:"text",name:"name",className:"input",autoComplete:"off"},i)),y?c.a.createElement("div",{className:"feedback invalid-feedback"},"Name is required"):null,c.a.createElement("label",{htmlFor:"name",className:"label ".concat(S?"is-invalid":g?"is-valid":"")},(null===p||void 0===p?void 0:p.required)?"Name!!!":"Name")),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",Object.assign({name:"password",type:"password",className:"input",autoComplete:"off"},E)),j?c.a.createElement("div",{class:"feedback invalid-feedback"},"Password is required"):null,(null===O||void 0===O?void 0:O.pattern)?c.a.createElement("div",{class:"feedback invalid-feedback"},"at least one capital letter / digit!"):null,c.a.createElement("label",{htmlFor:"password",className:"label ".concat(k?"is-invalid":""," ").concat(T?"is-valid":"")},(null===O||void 0===O?void 0:O.required)||N&&((null===O||void 0===O?void 0:O.minLength)||(null===O||void 0===O?void 0:O.maxLength))?"Password!!!":"Password")),c.a.createElement("div",{className:"register-btns"},c.a.createElement("button",{type:"submit",className:"btn-raise btn-design btn-register ".concat((g&&N&&(null===p||void 0===p||p.required),""))},"Login"),c.a.createElement(o.b,{to:"/"},c.a.createElement("button",{className:"btn-link cancel-register-btn",onClick:function(){return a({type:"SET_REGISTER_MODE",payload:!1})}},"Cancel"))))))},R=(a(104),function(){Object(u.c)((function(e){return e.userStatus.decodedToken}));var e=Object(u.c)((function(e){return e.userStatus.currentUser})),t=Object(u.c)((function(e){return e.chatReducer.chatter})),a=Object(u.c)((function(e){return e.chatReducer.socket})),l=Object(u.c)((function(e){return e.chatReducer.message})),r=Object(n.useState)(""),o=Object(i.a)(r,2),s=o[0],m=o[1];Object(n.useEffect)((function(){console.log(e),console.log(t)}),[]);return c.a.createElement("div",{className:""},t?c.a.createElement("div",{className:"chat-container"},c.a.createElement("form",{onSubmit:function(n){console.log(e),console.log(t);var c={text:s,chatter:t,sender:JSON.parse(e)};n.preventDefault(),console.log(l),a.emit("new-contact",c)},className:"form"},c.a.createElement("h3",{className:"chat-header"},c.a.createElement("span",{className:"name"},JSON.parse(e).name,", "),"you are chatting with ",c.a.createElement("span",{className:"name"},t.userName)),c.a.createElement("div",{className:"chat-form"},c.a.createElement("textarea",{className:"chat-textarea",type:"text",onChange:function(e){return m(e.target.value)}}),c.a.createElement("button",{className:"chat-btn",type:"submit"},"Send"))),c.a.createElement("div",{className:"chat-messages-container"},t.userName===(null===l||void 0===l?void 0:l.from)&&c.a.createElement("div",{className:"message"},c.a.createElement("p",{className:"from"},null===l||void 0===l?void 0:l.from),c.a.createElement("p",{className:"text"},null===l||void 0===l?void 0:l.text)))):c.a.createElement("div",{className:"no-messages-container"},c.a.createElement("div",{className:"no-messages"},"You have no active chats at the moment!")))}),C=(a(105),function(){var e=Object(T.a)(),t=e.register,a=e.handleSubmit,l=e.errors,r=(e.watch,Object(u.c)((function(e){return e.chatReducer.contact}))),o=Object(u.c)((function(e){return e.userStatus.currentUser})),m=Object(n.useState)(!1),d=Object(i.a)(m,2),v=d[0],g=d[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),b=f[0],E=f[1],h=Object(s.g)();return c.a.createElement("div",{className:"contact-page"},c.a.createElement("div",{className:"contact-column"},c.a.createElement("form",{className:"contact-form-container",onSubmit:a((function(e){var t=e.from,a=e.password,n=e.to,c=e.subject,l=e.text,r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:t,password:a,to:n,subject:c,text:l})};fetch("http://localhost:4000/auth/sendemail",r).then((function(e){g(!0),setTimeout((function(){h.push("/matchedusers")}),2e3)})).catch((function(e){return E(!0)}))}))},c.a.createElement("div",{className:"contact-input-group"},c.a.createElement("label",{htmlFor:"",className:"contact-label"},"My Email"),c.a.createElement("input",{className:"contact-input",type:"email",name:"from",ref:t({required:!0}),placeholder:JSON.parse(o).email,defaultValue:JSON.parse(o).email,required:!0}),l.from&&c.a.createElement("div",{className:""},l.from.message)),c.a.createElement("div",{className:"contact-input-group"},c.a.createElement("label",{htmlFor:"",className:"contact-label"},"My Password"),c.a.createElement("input",{className:"contact-input",type:"password",name:"password",ref:t({required:!0}),required:!0}),l.password&&c.a.createElement("div",{className:""},l.password.message)),c.a.createElement("div",{className:"contact-input-group"},c.a.createElement("label",{htmlFor:"",className:"contact-label"},"Email to"),c.a.createElement("input",{className:"contact-input",type:"email",name:"to",ref:t({required:!0}),placeholder:r.email,defaultValue:r.email,required:!0}),l.to&&c.a.createElement("div",{className:""},l.to.message)),c.a.createElement("div",{className:"contact-input-group"},c.a.createElement("label",{htmlFor:"",className:"contact-label"},"Subject"),c.a.createElement("input",{className:"contact-input",type:"text",name:"subject",ref:t({required:!0}),required:!0}),l.subject&&c.a.createElement("div",{className:""},l.subject.message)),c.a.createElement("div",{className:"contact-input-group"},c.a.createElement("textarea",{className:"contact-text",name:"text",placeholder:"My message here...",ref:t({required:!0})}),l.text&&c.a.createElement("div",{className:""},l.text.message)),c.a.createElement("input",{type:"submit",value:"submit",className:"contact-btn"})),v&&c.a.createElement("div",{className:"contact-feedback"},"Email successfully sent to ",r.name),b&&c.a.createElement("div",{className:"contact-feedback"},"There was a problem sending email to"," ",c.a.createElement("span",{className:"contact-with"},r.name))))});function U(){return c.a.createElement("div",null,c.a.createElement(o.a,null,c.a.createElement(g,null),c.a.createElement("div",{className:"holder"},c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/login"},c.a.createElement(x,null)),c.a.createElement(s.b,{exact:!0,path:"/register"},c.a.createElement(p,null)),c.a.createElement(_,{exact:!0,path:"/home",component:w}),c.a.createElement(_,{exact:!0,path:"/languages",component:L}),c.a.createElement(_,{exact:!0,path:"/matchedusers",component:N}),c.a.createElement(_,{exact:!0,path:"/chat",component:R}),c.a.createElement(_,{exact:!0,path:"/contact",component:C})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(20),J=(a(27),{regMode:!1,currentUser:null,loggedIn:!1,decodedToken:null,filteredUsers:null,registered:!1}),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(console.log(e),t.type){case"SET_REGISTER_MODE":return Object(d.a)(Object(d.a)({},e),{},{regMode:t.payload});case"CURRENT_USER":return Object(d.a)(Object(d.a)({},e),{},{currentUser:t.payload});case"SUCCESSFULLY_REGISTERED":return Object(d.a)(Object(d.a)({},e),{},{registered:t.payload});case"LOGGEDIN":var n=a(27),c=!0,l=new Date,r=null;return t.payload&&(r=n(t.payload)).exp<l.getTime()&&(c=!1),console.log(c),console.log(JSON.stringify(t.payload)),Object(d.a)(Object(d.a)({},e),{},{loggedIn:!c,decodedToken:r});case"FILTERED_USERS":return Object(d.a)(Object(d.a)({},e),{},{filteredUsers:t.payload});default:return e}},I={},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(console.log(e),t.type){case"SET_USER_OFFEREDLGS":return Object(d.a)(Object(d.a)({},e),{},{userOfferedLgs:t.payload});case"SET_USER_WANTEDLGS":return Object(d.a)(Object(d.a)({},e),{},{userWantedLgs:t.payload});case"SET_OFFERED_LGS_MODE":return Object(d.a)(Object(d.a)({},e),{},{offeredLgsMode:t.payload});case"SET_WANTED_LGS_MODE":return Object(d.a)(Object(d.a)({},e),{},{wantedLgsMode:t.payload});default:return e}},M={socket:null,chatter:null,connectedMembers:null},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(console.log(e),t.type){case"SET_CONTACT":return Object(d.a)(Object(d.a)({},e),{},{contact:t.payload});case"SET_CHATTER":return Object(d.a)(Object(d.a)({},e),{},{chatter:t.payload});case"SET_SOCKET":return Object(d.a)(Object(d.a)({},e),{},{socket:t.payload});case"SET_MESSAGE":return Object(d.a)(Object(d.a)({},e),{},{message:t.payload});case"SET_CONNECTED_USERS":return Object(d.a)(Object(d.a)({},e),{},{connectedMembers:t.payload});default:return e}},A=Object(D.b)({userStatus:P,languagesReducer:F,chatReducer:G}),W=(a(108),Object(D.c)(A,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));r.a.render(c.a.createElement(u.a,{store:W},c.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,a){e.exports=a(109)},64:function(e,t,a){},65:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){},95:function(e,t){},98:function(e,t,a){},99:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.d6908f6a.chunk.js.map